# 羽bot

羽bot，不是羽波，集器人，羽波的私货集合体。

## 明日方舟相关

包括集成战略统计和抽卡统计，使用本组件需要提供明日方舟个人中心登录凭证(token)以查询数据

集器人会使用token每小时整点自动从明日方舟官方接口更新游戏账号的集成战略和抽卡等数据，群友可以用指令查询相关统计；除了自动更新，也可以发送指令 `@不是羽波 更新数据` 手动更新

### token

集器人使用[明日方舟个人中心](https://ak.hypergryph.com/user/home)登录凭证(token)从官方接口查询数据

#### 更新token

在群里发送 `更新token` ，集器人会发送如下的链接，把它复制到浏览器打开

<https://yubo.run/bot/arknights/update_token/>

（每次发送的链接都是一样的，能打开就行，不用每次都发送 `更新token`）

（在这个页面也可以直接点击跳转不用再回去群里发.jpg）

按照网页中的说明操作，在第二步记得**全选**

在输入框中填入QQ和刚才**全选**复制的token信息，提交后如果成功会得到验证码，把这个验证码发到群里，收到集器人回复才算更新完成

#### 移除token

别走好吗.jpg

在群里发送 `移除token` ，集器人会回复如下的消息

> 你确定吗？请在5分钟内发送“我确定要移除token”，若如此做，博士的token将被移除，与QQ的关联将被解除，其数据将不再被自动更新，但是已有的数据将被继续保留

在5分钟内发送 `我确定要移除token` 即可移除token

### 集器人

集器人会定时播报集集雷达速报、集集日报、集集周报

群友可以用指令查询相关统计

### 抽卡统计

官网的抽卡记录只提供30天内最近100条（每次单抽算1条，每次十连算1条），如果（打算）在一小时内连续抽100条记录请及时手动更新数据以保证数据完整 ~还没见过这么抽的群友~

数据更新后，如果检测到抽卡记录更新，会自动请求 [明日方舟寻访记录分析](https://arkgacha.kwer.top/) 同步更新，即只要集器人这边的token不失效，寻访记录分析那边的记录就不会因过期而失效

### 一些指令

```
查询傀影肉鸽统计 / 查询古堡肉鸽统计
查询水月肉鸽统计
查询萨米肉鸽统计 [戴墨镜😎/🕶可防坍缩]
查询最近古堡探索

查询群友节点 [傀影/古堡/水月/萨米/全部/累计]
查询群友存款 [傀影/古堡/水月/萨米/全部/累计]

查询抽卡统计 [卡池名]
查询群友抽卡统计 <卡池名>

@集器人 帮助
@集器人 更新数据
更新token
移除token
```

## Steam相关

暂未取回这部分力量

## 雀魂相关

集器人会定时播报雀魂战报、雀魂周报

## 其他组件

### arkdle

基于[nonebot-plugin-handle](https://github.com/noneplugin/nonebot-plugin-handle)修改而成的[改版handle](https://github.com/SonodaHanami/nonebot-plugin-handle)，用到了[舟语词典](https://github.com/SonodaHanami/arknights_words/blob/master/answers_arknights.json)

#### 开始游戏

发送 `arkdle` 开始游戏

你有10次的机会猜一个四字舟语

每次猜测后，汉字与拼音的颜色将会标识其与正确答案的区别

<span style="color: #1d9c9c;">青色</span> 表示其出现在答案中且在正确的位置

<span style="color: #de7525;">橙色</span> 表示其出现在答案中但不在正确的位置，最大着色次数为这个声母/韵母在这个词语中出现的次数

下划线 表示这个声母韵母组合来自同一个字

每个格子的 汉字、声母、韵母、声调 都会独立进行颜色的指示

当四个格子都为青色时，你便赢得了游戏！

可发送 `结束` 结束游戏，发送 `提示` 查看提示

严格模式默认开启且无法关闭，即猜测的四字词语必须是舟语

使用 `--nohint` 选项禁用提示

使用 `--confirm` 选项开启确认模式，在猜测的四字词语不是舟语时会发送提示

使用 `--hard` 选项开启困难模式，可猜次数变为5，自动禁用提示，自动启用严格模式

例如：发送 `arkdle --nohint --confirm` 将开始一局禁用提示、开启确认模式的arkdle

#### 查询舟语

发送 `查询舟语 <四字舟语>` 可以查询四字舟语的拼音、所属范围、释义

### 加群/退群提醒

有新群友进群时集器人会自动发送欢迎消息

有群友退群时集器人会自动发送白白喵消息
